<!DOCTYPE html>
<html>
<head>
    <title>Debug Biskaken API</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-8">
    <h1 class="text-2xl font-bold mb-4">Biskaken API Debug</h1>
    
    <div class="space-y-4">
        <button id="testLogin" class="bg-blue-500 text-white px-4 py-2 rounded">Test Login</button>
        <button id="testCustomers" class="bg-green-500 text-white px-4 py-2 rounded">Test Customers</button>
        <button id="testJobs" class="bg-yellow-500 text-white px-4 py-2 rounded">Test Jobs</button>
        <button id="testInventory" class="bg-purple-500 text-white px-4 py-2 rounded">Test Inventory</button>
        <button id="testInvoices" class="bg-red-500 text-white px-4 py-2 rounded">Test Invoices</button>
    </div>
    
    <div id="results" class="mt-8 space-y-2"></div>
    
    <script>
        const API_BASE = 'http://localhost:5000';
        
        function log(message) {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = 'p-2 bg-gray-100 rounded';
            div.textContent = new Date().toLocaleTimeString() + ': ' + message;
            results.appendChild(div);
        }
        
        async function apiCall(endpoint, options = {}) {
            try {
                log(`Making request to ${endpoint}...`);
                const response = await fetch(API_BASE + endpoint, {
                    ...options,
                    headers: {
                        'Content-Type': 'application/json',
                        'Origin': 'http://localhost:3003',
                        ...options.headers
                    }
                });
                const data = await response.json();
                log(`✅ ${endpoint}: ${data.success ? 'Success' : 'Failed'} - ${JSON.stringify(data).substring(0, 100)}...`);
                return data;
            } catch (error) {
                log(`❌ ${endpoint}: ${error.message}`);
                return null;
            }
        }
        
        document.getElementById('testLogin').onclick = () => {
            apiCall('/api/test/auth/login', {
                method: 'POST',
                body: JSON.stringify({ email: 'admin@biskaken.com', password: 'admin123' })
            });
        };
        
        document.getElementById('testCustomers').onclick = () => {
            apiCall('/api/test/customers');
        };
        
        document.getElementById('testJobs').onclick = () => {
            apiCall('/api/test/jobs');
        };
        
        document.getElementById('testInventory').onclick = () => {
            apiCall('/api/test/inventory');
        };
        
        document.getElementById('testInvoices').onclick = () => {
            apiCall('/api/test/invoices');
        };
        
        // Auto-test on load
        log('Debug page loaded. Backend should be at ' + API_BASE);
    </script>
</body>
</html>