# Static Frontend Deployment for Biskaken Auto Landing Page + Blog
[variables]
NODE_ENV = "production"
NODE_VERSION = "20"

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = [
    "echo 'ğŸ“¦ Installing frontend dependencies...'",
    "npm ci --omit=dev",
    "echo 'ğŸ”§ Installing Rollup native dependencies for Linux...'",
    "npm install @rollup/rollup-linux-x64-gnu --save-optional"
]

[phases.build]
cmds = [
    "echo 'ğŸ—ï¸ Building static frontend...'",
    "npm run build:frontend"
]

[start]
cmd = "echo 'ğŸš€ Starting Express static server...' && npm start"